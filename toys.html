<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Магазин игрушек - Детские игрушки и игры</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            
        }

        body.modal-open {
            overflow: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }

        header {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            color: #ffd700;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .nav-menu {
            display: flex;
            gap: 25px;
            list-style: none;
        }

        .nav-menu a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            font-size: 18px;
            padding: 8px 15px;
            border-radius: 5px;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-menu a:hover {
            background-color: rgba(255,255,255,0.15);
            transform: translateY(-2px);
        }

        .nav-menu a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: #ffd700;
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }

        .nav-menu a:hover::after {
            width: 80%;
        }

        .cart-icon {
            position: relative;
            font-size: 24px;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            background-color: rgba(255,255,255,0.1);
            transition: all 0.3s ease;
        }

        .cart-icon:hover {
            background-color: rgba(255,255,255,0.2);
            transform: scale(1.1) rotate(10deg);
        }

        #cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #ff4757;
            color: white;
            font-size: 12px;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            display: none;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 10px;
            transition: transform 0.3s ease;
        }

        .menu-toggle:hover {
            transform: rotate(90deg);
        }

        .hero {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(rgba(106, 17, 203, 0.9), rgba(37, 117, 252, 0.9));
            color: white;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            animation: slideUp 0.8s ease-out;
        }

        .hero h1 {
            font-size: 42px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: fadeIn 1s ease-out 0.3s both;
        }

        .hero p {
            font-size: 20px;
            max-width: 800px;
            margin: 0 auto 30px;
            opacity: 0.9;
            animation: fadeIn 1s ease-out 0.6s both;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 30px;
            margin-top: 40px;
            animation: fadeIn 1s ease-out 0.9s both;
        }

        .product-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.4s ease;
            position: relative;
            animation: slideUp 0.5s ease-out;
        }

        .product-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #6a11cb, #2575fc);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .product-card:hover::before {
            transform: scaleX(1);
        }

        .product-gallery {
            height: 300px;
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            cursor: pointer;
        }

        .product-gallery img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: transform 0.5s ease;
            padding: 15px;
        }

        .product-card:hover .product-gallery img {
            transform: scale(1.05);
        }

        .product-info {
            padding: 20px;
        }

        .product-title {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .product-description {
            color: #7f8c8d;
            font-size: 15px;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .product-price {
            font-size: 26px;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .product-price::before {
            content: '₽';
            font-size: 20px;
        }

        .add-to-cart {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .add-to-cart::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .add-to-cart:hover::before {
            width: 300px;
            height: 300px;
        }

        .add-to-cart:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(37, 117, 252, 0.4);
        }

        .add-to-cart:active {
            transform: translateY(0);
        }

        .add-to-cart i {
            font-size: 18px;
            transition: transform 0.3s ease;
        }

        .add-to-cart:hover i {
            transform: scale(1.2) rotate(10deg);
        }

        /* МОДАЛЬНОЕ ОКНО ПРОСМОТРА ТОВАРА */
        .product-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            animation: fadeIn 0.3s ease;
            overflow-y: auto;
        }

        .product-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .product-modal-content {
            background: white;
            border-radius: 20px;
            max-width: 1000px;
            width: 90%;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            animation: slideUp 0.3s ease;
            position: relative;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
        }

        .product-modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .product-modal-close:hover {
            background: rgba(0,0,0,0.9);
            transform: rotate(90deg) scale(1.1);
        }

        .product-modal-body {
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .product-modal-gallery {
            position: relative;
            height: 50vh;
            min-height: 400px;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 30px;
        }

        .modal-image-wrapper {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .modal-main-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: opacity 0.3s ease;
        }

        .modal-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 5;
        }

        .modal-nav-btn:hover {
            background: rgba(0,0,0,0.9);
            transform: translateY(-50%) scale(1.1);
        }

        .modal-nav-prev {
            left: 20px;
        }

        .modal-nav-next {
            right: 20px;
        }

        .modal-gallery-dots {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 10px;
            z-index: 5;
        }

        .modal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(0,0,0,0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-dot.active {
            background: #6a11cb;
            transform: scale(1.2);
        }

        .product-modal-info {
            padding: 30px;
            max-height: 40vh;
            overflow-y: auto;
            background: white;
        }

        .modal-product-title {
            font-size: 28px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .modal-product-description {
            font-size: 16px;
            line-height: 1.8;
            color: #555;
            margin-bottom: 25px;
        }

        .modal-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .modal-detail-item {
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .modal-detail-label {
            font-size: 14px;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .modal-detail-value {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
        }

        .modal-price-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #eee;
        }

        .modal-price {
            font-size: 32px;
            font-weight: bold;
            color: #e74c3c;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .modal-price::before {
            content: '₽';
            font-size: 24px;
        }

        .modal-add-to-cart-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .modal-add-to-cart-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(37, 117, 252, 0.4);
        }

        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 40px 20px;
            margin-top: 60px;
            border-radius: 15px 15px 0 0;
            animation: fadeIn 1s ease-out 1.2s both;
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: #bdc3c7;
            text-decoration: none;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-links a:hover {
            color: white;
            transform: translateY(-2px);
        }

        .copyright {
            margin-top: 20px;
            color: #95a5a6;
            font-size: 14px;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Адаптивность */
        @media (max-width: 768px) {
            .menu-toggle {
                display: block;
            }

            .nav-menu {
                position: fixed;
                top: 70px;
                left: 0;
                right: 0;
                background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
                flex-direction: column;
                padding: 20px;
                transform: translateY(-100%);
                opacity: 0;
                transition: all 0.4s ease;
                z-index: 999;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                border-radius: 0 0 15px 15px;
            }

            .nav-menu.active {
                transform: translateY(0);
                opacity: 1;
            }

            .hero h1 {
                font-size: 32px;
            }

            .hero p {
                font-size: 18px;
            }

            .products-grid {
                grid-template-columns: 1fr;
            }

            .product-modal-content {
                width: 95%;
                max-height: 95vh;
            }

            .product-modal-gallery {
                height: 40vh;
                min-height: 300px;
            }

            .modal-nav-btn {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }

            .product-modal-info {
                max-height: 50vh;
            }

            .modal-details-grid {
                grid-template-columns: 1fr;
            }

            .modal-price-section {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }

            .modal-add-to-cart-btn {
                width: 100%;
                justify-content: center;
            }

            .footer-links {
                flex-direction: column;
                gap: 15px;
            }
        }

        @media (max-width: 480px) {
            .hero {
                padding: 40px 15px;
            }

            .hero h1 {
                font-size: 28px;
            }

            .container {
                padding: 15px;
            }

            .product-card {
                margin: 0 10px;
            }

            .product-modal-gallery {
                padding: 15px;
                min-height: 250px;
            }

            .product-modal-info {
                padding: 20px;
            }

            .modal-product-title {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <!-- Шапка -->
    <header>
        <div class="header-container">
            <div class="logo">
                <i class="fas fa-dragon"></i>
                <span>MagicToys</span>
            </div>
            
            <button class="menu-toggle" aria-label="Меню" aria-expanded="false">
                <i class="fas fa-bars"></i>
            </button>
            
            <ul class="nav-menu" id="nav-menu">
                <li><a href="#home"><i class="fas fa-home"></i> Главная</a></li>
                <li><a href="#products"><i class="fas fa-gifts"></i> Товары</a></li>
                <li><a href="#about"><i class="fas fa-info-circle"></i> О нас</a></li>
                <li><a href="#contact"><i class="fas fa-phone"></i> Контакты</a></li>
            </ul>
            
            <div class="cart-icon" id="cart-icon" aria-label="Корзина">
                <i class="fas fa-shopping-cart"></i>
                <span id="cart-badge" aria-live="polite">0</span>
            </div>
        </div>
    </header>

    <!-- Основной контент -->
    <div class="container">
        <!-- Герой-секция -->
        <section class="hero" id="home">
            <h1>Мир волшебных игрушек для детей и взрослых!</h1>
            <p>Откройте для себя уникальную коллекцию качественных игрушек, которые подарят радость и незабываемые эмоции. От классики до современных хитов - всё для счастливого детства!</p>
            <div style="margin-top: 30px;">
                <button class="add-to-cart" onclick="document.querySelector('#products').scrollIntoView({behavior: 'smooth'})" style="width: auto; padding: 12px 30px;">
                    <i class="fas fa-arrow-down"></i> Смотреть товары
                </button>
            </div>
        </section>

        <!-- Секция товаров -->
        <section id="products">
            <h2 style="text-align: center; margin-bottom: 30px; color: #2c3e50; font-size: 32px;">
                <i class="fas fa-star" style="color: #ffd700;"></i> Популярные товары
            </h2>
            
            <div class="products-grid">
                <!-- Дракон -->
                <div class="product-card" data-product="dragon">
                    <div class="product-gallery" onclick="openProductModal('dragon')">
                        <img id="dragon-img" src="" alt="Дракон светящийся в темноте">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Дракон светящийся в темноте</h3>
                        <p class="product-description">Великолепный светящийся дракон с подвижными крыльями. Светится в темноте! Безопасен для детей от 5 лет.</p>
                        <div class="product-price">1 299</div>
                        <button class="add-to-cart" onclick="addToCart('dragon', 'Дракон светящийся в темноте', '1299')">
                            <i class="fas fa-cart-plus"></i> В корзину
                        </button>
                    </div>
                </div>

                <!-- Какаши -->
                <div class="product-card" data-product="kakashi">
                    <div class="product-gallery" onclick="openProductModal('kakashi')">
                        <img id="kakashi-img" src="" alt="Фигурка Какаши">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Фигурка Какаши Хатаке</h3>
                        <p class="product-description">Детализированная коллекционная фигурка из аниме Наруто. Высота: 18 см, материал: высококачественный ПВХ.</p>
                        <div class="product-price">899</div>
                        <button class="add-to-cart" onclick="addToCart('kakashi', 'Фигурка Какаши', '899')">
                            <i class="fas fa-cart-plus"></i> В корзину
                        </button>
                    </div>
                </div>

                <!-- Пистолет -->
                <div class="product-card" data-product="pistol">
                    <div class="product-gallery" onclick="openProductModal('pistol')">
                        <img id="pistol-img" src="" alt="Пистолет с пульками">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Пистолет с мягкими пульками</h3>
                        <p class="product-description">Безопасный пистолет для детей. В комплекте: пистолет, 20 мягких пулек, мишень. Для детей от 6 лет.</p>
                        <div class="product-price">599</div>
                        <button class="add-to-cart" onclick="addToCart('pistol', 'Пистолет с пульками', '599')">
                            <i class="fas fa-cart-plus"></i> В корзину
                        </button>
                    </div>
                </div>

                <!-- Лабубу -->
                <div class="product-card" data-product="labubu">
                    <div class="product-gallery" onclick="openProductModal('labubu')">
                        <img id="labubu-img" src="" alt="Фигурка Лабубу">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Коллекционная фигурка Лабубу</h3>
                        <p class="product-description">Милая фигурка Лабубу разных цветов. Высота: 10 см. Идеально для коллекции или подарка.</p>
                        <div class="product-price">1 499</div>
                        <button class="add-to-cart" onclick="addToCart('labubu', 'Фигурка Лабубу', '1499')">
                            <i class="fas fa-cart-plus"></i> В корзину
                        </button>
                    </div>
                </div>

                <!-- Домик -->
                <div class="product-card" data-product="house">
                    <div class="product-gallery" onclick="openProductModal('house')">
                        <img id="house-img" src="" alt="Новогодний домик">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Волшебный новогодний домик</h3>
                        <p class="product-description">Светящийся новогодний домик с подсветкой и зимним декором. Создает праздничное настроение! Работает от батареек.</p>
                        <div class="product-price">1 799</div>
                        <button class="add-to-cart" onclick="addToCart('house', 'Новогодний домик', '1799')">
                            <i class="fas fa-cart-plus"></i> В корзину
                        </button>
                    </div>
                </div>

                <!-- UNO -->
                <div class="product-card" data-product="uno">
                    <div class="product-gallery" onclick="openProductModal('uno')">
                        <img id="uno-img" src="" alt="Игра UNO">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Настольная игра UNO</h3>
                        <p class="product-description">Классическая карточная игра для всей семьи. От 2 до 10 игроков. Отличный подарок для детей и взрослых.</p>
                        <div class="product-price">399</div>
                        <button class="add-to-cart" onclick="addToCart('uno', 'Игра UNO', '399')">
                            <i class="fas fa-cart-plus"></i> В корзину
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Модальное окно просмотра товара -->
    <div id="productModal" class="product-modal" onclick="closeProductModal(event)">
        <div class="product-modal-content" onclick="event.stopPropagation()">
            <button class="product-modal-close" onclick="closeProductModal()">
                <i class="fas fa-times"></i>
            </button>
            
            <div class="product-modal-body">
                <div class="product-modal-gallery">
                    <div class="modal-image-wrapper">
                        <img id="modalProductImage" class="modal-main-image" src="" alt="Фото товара">
                        
                        <button class="modal-nav-btn modal-nav-prev" onclick="changeModalPhoto(-1, event)">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        
                        <button class="modal-nav-btn modal-nav-next" onclick="changeModalPhoto(1, event)">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        
                        <div class="modal-gallery-dots" id="modalGalleryDots"></div>
                    </div>
                </div>
                
                <div class="product-modal-info">
                    <h2 class="modal-product-title" id="modalProductTitle"></h2>
                    <p class="modal-product-description" id="modalProductDescription"></p>
                    
                    <div class="modal-details-grid" id="modalDetailsGrid"></div>
                    
                    <div class="modal-price-section">
                        <div class="modal-price" id="modalProductPrice"></div>
                        <button class="modal-add-to-cart-btn" id="modalAddToCartBtn">
                            <i class="fas fa-cart-plus"></i> Добавить в корзину
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Подвал -->
    <footer id="contact">
        <div class="footer-content">
            <h3 style="font-size: 28px; margin-bottom: 20px;">MagicToys</h3>
            <p style="font-size: 16px; opacity: 0.9; max-width: 600px; margin: 0 auto 30px;">
                Сделаем детство вашего ребенка волшебным! Мы всегда на связи и готовы помочь с выбором идеальной игрушки.
            </p>
            <div class="footer-links">
                <a href="https://t.me/NewshopNm" target="_blank"><i class="fab fa-telegram"></i> Telegram</a>
                <a href="tel:+79991234567"><i class="fas fa-phone"></i> +7 (999) 123-45-67</a>
                <a href="mailto:info@magictoys.ru"><i class="fas fa-envelope"></i> info@magictoys.ru</a>
                <a href="#"><i class="fas fa-map-marker-alt"></i> Москва, ул. Игрушечная, 15</a>
            </div>
            <div class="copyright">
                © 2024 MagicToys. Все права защищены. Сделано с ❤️ для любителей игрушек
            </div>
        </div>
    </footer>

<script>
// ДАННЫЕ ТОВАРОВ
const productData = {
    'dragon': {
        name: 'Дракон светящийся в темноте',
        price: '1299',
        description: 'Великолепный светящийся дракон с подвижными крыльями и реалистичными звуковыми эффектами. Игрушка полностью безопасна для детей, изготовлена из высококачественного пластика без острых краев. В темноте дракон светится нежным зеленым свечением, что создает волшебную атмосферу в детской комнате. Крылья подвижные, позволяют принимать различные позы. Работает от 3-х батареек АА (в комплект не входят).',
        details: {
            'Артикул': 'DRG-2024',
            'Возраст': '5+ лет',
            'Материал': 'Пластик, электронные компоненты',
            'Размер': '25 × 18 × 12 см',
            'В наличии': 'Да',
            'Цвет': 'Белый с зеленой подсветкой',
            'Вес': '450 г',
            'Особенности': 'Светится в темноте, звуковые эффекты'
        },
        photos: [
            {url: 'toys-images/dragons/white.png', alt: 'Белый светящийся дракон'},
            {url: 'https://via.placeholder.com/800x600/4CAF50/FFFFFF?text=Дракон+вид+2', alt: 'Дракон сбоку'},
            {url: 'https://via.placeholder.com/800x600/4CAF50/FFFFFF?text=Дракон+вид+3', alt: 'Дракон с подсветкой'}
        ]
    },
    'kakashi': {
        name: 'Фигурка Какаши Хатаке',
        price: '899',
        description: 'Детализированная коллекционная фигурка легендарного персонажа из аниме "Наруто" - Какаши Хатаке. Выполнена с высокой точностью: проработаны все детали костюма, включая маску, шрам на глазу и знак деревни. Фигурка имеет 12 точек артикуляции, что позволяет воссоздавать любые позы из сериала. В комплекте идут сменные руки и оружие. Отличный подарок для фанатов Наруто и коллекционеров.',
        details: {
            'Артикул': 'KKSH-001',
            'Возраст': '14+ лет',
            'Материал': 'ПВХ, ABS пластик',
            'Размер': '18 × 8 × 6 см',
            'В наличии': 'Да',
            'Цвет': 'Серебристый, синий, черный',
            'Вес': '320 г',
            'Особенности': '12 точек артикуляции, сменные аксессуары'
        },
        photos: [
            {url: 'toys-images/kakahi/blu.png', alt: 'Фигурка Какаши'},
            {url: 'https://via.placeholder.com/800x600/2196F3/FFFFFF?text=Какаши+вид+2', alt: 'Какаши вид сбоку'},
            {url: 'https://via.placeholder.com/800x600/2196F3/FFFFFF?text=Какаши+вид+3', alt: 'Какаши с оружием'}
        ]
    },
    'pistol': {
        name: 'Пистолет с мягкими пульками',
        price: '599',
        description: 'Безопасный пистолет для детей с мягкими пульками. Идеально подходит для активных игр на свежем воздухе. Пульки изготовлены из мягкого поролона, совершенно безопасны при попадании. Пистолет имеет реалистичный дизайн, но выполнен в ярких цветах для привлечения внимания детей. В комплекте: пистолет, 20 мягких пулек, мишень. Развивает координацию движений и меткость.',
        details: {
            'Артикул': 'PST-2024',
            'Возраст': '6+ лет',
            'Материал': 'Пластик, поролон',
            'Размер': '22 × 15 × 5 см',
            'В наличии': 'Да',
            'Цвет': 'Желтый, оранжевый',
            'Вес': '280 г',
            'Особенности': '20 пулек в комплекте, безопасные материалы'
        },
        photos: [
            {url: 'toys-images/pistol/yellow.png', alt: 'Желтый пистолет с пульками'},
            {url: 'https://via.placeholder.com/800x600/FFC107/000000?text=Пистолет+вид+2', alt: 'Комплект пулек'},
            {url: 'https://via.placeholder.com/800x600/FFC107/000000?text=Пистолет+вид+3', alt: 'Пистолет и мишень'}
        ]
    },
    'labubu': {
        name: 'Коллекционная фигурка Лабубу',
        price: '1499',
        description: 'Очаровательная коллекционная фигурка Лабубу от популярной серии. Каждая фигурка уникальна и имеет свои характерные черты. Выполнена из высококачественного винила с детальной росписью. Отличный подарок для коллекционеров фигурок и поклонников современной поп-культуры. Фигурка упакована в фирменную подарочную коробку.',
        details: {
            'Артикул': 'LBB-001',
            'Возраст': '12+ лет',
            'Материал': 'Винил, акриловая краска',
            'Размер': '10 × 8 × 8 см',
            'В наличии': 'Да',
            'Цвет': 'Разные цвета',
            'Вес': '180 г',
            'Особенности': 'Коллекционная, подарочная упаковка'
        },
        photos: [
            {url: 'toys-images/labubu/grey.jpg', alt: 'Серый Лабубу'},
            {url: 'toys-images/labubu/purple.jpg', alt: 'Фиолетовый Лабубу'},
            {url: 'toys-images/labubu/red.jpg', alt: 'Красный Лабубу'},
            {url: 'toys-images/labubu/white.jpg', alt: 'Белый Лабубу'}
        ]
    },
    'house': {
        name: 'Волшебный новогодний домик',
        price: '1799',
        description: 'Сказочный новогодний домик с подсветкой и зимним декором. Идеально создает праздничное настроение! Домик имеет реалистичную архитектуру с детализированными элементами: снег на крыше, светящиеся окна, дым из трубы. Внутри домика находится миниатюрная новогодняя сцена. Работает от 2-х батареек АА. Отличное украшение для новогоднего стола или интерьера.',
        details: {
            'Артикул': 'HSE-2024',
            'Возраст': '3+ лет',
            'Материал': 'Пластик, светодиоды',
            'Размер': '20 × 15 × 18 см',
            'В наличии': 'Да',
            'Цвет': 'Белый, голубой, золотой',
            'Вес': '520 г',
            'Особенности': 'Светящиеся окна, новогодний декор'
        },
        photos: [
            {url: 'https://via.placeholder.com/800x600/FF5722/FFFFFF?text=Новогодний+домик', alt: 'Новогодний домик с подсветкой'}
        ]
    },
    'uno': {
        name: 'Настольная игра UNO',
        price: '399',
        description: 'Классическая карточная игра для всей семьи. Правила просты и понятны даже детям: нужно быстрее всех избавиться от своих карт, выполняя специальные действия. Игра развивает логическое мышление, внимание и скорость реакции. В комплекте: 112 карт, правила игры на русском языке. Отличный подарок для семейного досуга и вечеринок с друзьями.',
        details: {
            'Артикул': 'UNO-001',
            'Возраст': '7+ лет',
            'Материал': 'Картон',
            'Размер': '9.5 × 6 × 2.5 см',
            'В наличии': 'Да',
            'Цвет': 'Разноцветный',
            'Вес': '150 г',
            'Особенности': '2-10 игроков, правила на русском'
        },
        photos: [
            {url: 'https://via.placeholder.com/800x600/3F51B5/FFFFFF?text=Игра+UNO+коробка', alt: 'Коробка игры UNO'},
            {url: 'https://via.placeholder.com/800x600/3F51B5/FFFFFF?text=Карты+UNO', alt: 'Карты игры UNO'}
        ]
    }
};

// ГЛОБАЛЬНЫЕ ПЕРЕМЕННЫЕ ДЛЯ МОДАЛЬНОГО ОКНА
let currentModalProduct = null;
let currentModalPhotoIndex = 0;

// КОРЗИНА
let shoppingCart = {
    items: JSON.parse(localStorage.getItem('cart')) || [],
    
    addItem: function(item) {
        const existing = this.items.find(i => i.id === item.id && i.title === item.title);
        if (existing) {
            existing.quantity += 1;
        } else {
            this.items.push({...item, quantity: 1});
        }
        this.save();
        updateCart();
        showNotification(`✅ Добавлено: ${item.title}`, 'success');
    },
    
    removeItem: function(index) {
        if (index >= 0 && index < this.items.length) {
            this.items.splice(index, 1);
            this.save();
            return true;
        }
        return false;
    },
    
    updateQuantity: function(index, newQuantity) {
        if (index >= 0 && index < this.items.length) {
            if (newQuantity < 1) {
                return this.removeItem(index);
            }
            this.items[index].quantity = newQuantity;
            this.save();
            return true;
        }
        return false;
    },
    
    clear: function() {
        this.items = [];
        this.save();
    },
    
    getTotal: function() {
        return this.items.reduce((sum, item) => sum + (parseInt(item.price) * item.quantity), 0);
    },
    
    getCount: function() {
        return this.items.reduce((sum, item) => sum + item.quantity, 0);
    },
    
    save: function() {
        localStorage.setItem('cart', JSON.stringify(this.items));
    }
};

// ЗАГРУЗКА ИЗОБРАЖЕНИЙ ТОВАРОВ
function loadProductImages() {
    const products = ['dragon', 'kakashi', 'pistol', 'labubu', 'house', 'uno'];
    
    products.forEach(productId => {
        const product = productData[productId];
        if (!product || !product.photos || product.photos.length === 0) return;
        
        const imgElement = document.getElementById(`${productId}-img`);
        if (!imgElement) return;
        
        // Пробуем загрузить первое фото
        const firstPhoto = product.photos[0];
        const realImg = new Image();
        
        realImg.onload = () => {
            imgElement.src = firstPhoto.url;
            imgElement.alt = firstPhoto.alt;
        };
        
        realImg.onerror = () => {
            // Если фото не загружается, используем placeholder
            imgElement.src = getPlaceholderUrl(productId, 0);
            imgElement.alt = product.name;
        };
        
        realImg.src = firstPhoto.url;
    });
}

function getPlaceholderUrl(productId, index) {
    const colors = {
        'dragon': '#4CAF50',
        'kakashi': '#2196F3',
        'pistol': '#FFC107',
        'labubu': '#9C27B0',
        'house': '#FF5722',
        'uno': '#3F51B5'
    };
    
    const names = {
        'dragon': 'Дракон',
        'kakashi': 'Какаши',
        'pistol': 'Пистолет',
        'labubu': 'Лабубу',
        'house': 'Домик',
        'uno': 'UNO'
    };
    
    const color = colors[productId] || '#2196F3';
    const name = names[productId] || 'Товар';
    const hexColor = color.startsWith('#') ? color.substring(1) : '2196F3';
    
    return `https://via.placeholder.com/600x400/${hexColor}/FFFFFF?text=${encodeURIComponent(name)}+${index + 1}`;
}

// МОДАЛЬНОЕ ОКНО ТОВАРА
function openProductModal(productId) {
    console.log('Открытие модального окна для товара:', productId);
    
    const product = productData[productId];
    if (!product) {
        console.error('Товар не найден:', productId);
        return;
    }
    
    currentModalProduct = productId;
    currentModalPhotoIndex = 0;
    
    // Заполняем информацию о товаре
    document.getElementById('modalProductTitle').textContent = product.name;
    document.getElementById('modalProductDescription').textContent = product.description;
    document.getElementById('modalProductPrice').textContent = product.price;
    
    // Заполняем детали товара
    const detailsGrid = document.getElementById('modalDetailsGrid');
    detailsGrid.innerHTML = '';
    
    for (const [key, value] of Object.entries(product.details)) {
        const detailItem = document.createElement('div');
        detailItem.className = 'modal-detail-item';
        detailItem.innerHTML = `
            <div class="modal-detail-label">${key}:</div>
            <div class="modal-detail-value">${value}</div>
        `;
        detailsGrid.appendChild(detailItem);
    }
    
    // Настраиваем кнопку добавления в корзину
    const addToCartBtn = document.getElementById('modalAddToCartBtn');
    addToCartBtn.onclick = (e) => {
        e.stopPropagation();
        addToCart(productId, product.name, product.price);
        closeProductModal();
    };
    
    // Загружаем первое изображение
    loadModalProductPhoto(productId, 0);
    
    // Создаем точки навигации
    createModalGalleryDots(product.photos.length);
    
    // Показываем модальное окно
    const modal = document.getElementById('productModal');
    modal.classList.add('active');
    document.body.classList.add('modal-open');
    
    // Добавляем обработчик колесика мыши
    modal.addEventListener('wheel', handleMouseWheel, { passive: false });
    
    console.log('Модальное окно успешно открыто');
}

function loadModalProductPhoto(productId, index) {
    const product = productData[productId];
    if (!product || !product.photos || index >= product.photos.length) return;
    
    const modalImg = document.getElementById('modalProductImage');
    const photo = product.photos[index];
    
    // Показываем placeholder пока загружается изображение
    modalImg.src = getPlaceholderUrl(productId, index);
    
    // Загружаем реальное изображение
    const realImg = new Image();
    realImg.onload = () => {
        modalImg.src = photo.url;
    };
    realImg.onerror = () => {
        // Оставляем placeholder если изображение не загрузилось
        console.log('Не удалось загрузить изображение:', photo.url);
    };
    realImg.src = photo.url;
    
    modalImg.alt = photo.alt;
    
    // Обновляем активную точку
    updateModalGalleryDots(index);
    currentModalPhotoIndex = index;
}

function createModalGalleryDots(total) {
    const dotsContainer = document.getElementById('modalGalleryDots');
    dotsContainer.innerHTML = '';
    
    for (let i = 0; i < total; i++) {
        const dot = document.createElement('span');
        dot.className = `modal-dot ${i === 0 ? 'active' : ''}`;
        dot.onclick = (e) => {
            e.stopPropagation();
            loadModalProductPhoto(currentModalProduct, i);
        };
        dotsContainer.appendChild(dot);
    }
}

function updateModalGalleryDots(activeIndex) {
    const dots = document.querySelectorAll('.modal-dot');
    dots.forEach((dot, index) => {
        dot.classList.toggle('active', index === activeIndex);
    });
}

function changeModalPhoto(direction, event) {
    if (event) event.stopPropagation();
    if (!currentModalProduct) return;
    
    const product = productData[currentModalProduct];
    if (!product || !product.photos || product.photos.length <= 1) return;
    
    const total = product.photos.length;
    let newIndex = (currentModalPhotoIndex + direction + total) % total;
    
    loadModalProductPhoto(currentModalProduct, newIndex);
}

// Обработчик колесика мыши для листания фото
function handleMouseWheel(event) {
    if (!currentModalProduct) return;
    
    const product = productData[currentModalProduct];
    if (!product || product.photos.length <= 1) return;
    
    event.preventDefault();
    
    if (event.deltaY > 0) {
        // Прокрутка вниз - следующее фото
        changeModalPhoto(1);
    } else if (event.deltaY < 0) {
        // Прокрутка вверх - предыдущее фото
        changeModalPhoto(-1);
    }
}

function closeProductModal(event) {
    if (event) {
        event.stopPropagation();
        // Закрываем только если кликнули на overlay (темный фон)
        if (event.target.id === 'productModal' || event.target.classList.contains('product-modal-close') || 
            event.target.closest('.product-modal-close')) {
            // Продолжаем закрытие
        } else {
            return; // Не закрываем если кликнули на содержимое модалки
        }
    }
    
    const modal = document.getElementById('productModal');
    modal.classList.remove('active');
    document.body.classList.remove('modal-open');
    
    // Удаляем обработчик колесика мыши
    modal.removeEventListener('wheel', handleMouseWheel);
    
    currentModalProduct = null;
    currentModalPhotoIndex = 0;
}

// Закрытие по клавише ESC
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        closeProductModal();
    }
});

// КОРЗИНА - ОСНОВНЫЕ ФУНКЦИИ
function addToCart(productId, productName, productPrice) {
    const item = { 
        id: productId, 
        title: productName, 
        price: productPrice
    };
    shoppingCart.addItem(item);
}

function updateCart() {
    const badge = document.getElementById('cart-badge');
    if (badge) {
        const total = shoppingCart.getCount();
        badge.textContent = total;
        badge.style.display = total > 0 ? 'flex' : 'none';
    }
}

function showCart() {
    if (shoppingCart.items.length === 0) {
        showNotification('🛒 Корзина пуста', 'info');
        return;
    }
    
    const overlay = document.createElement('div');
    overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 10000;
        display: flex;
        justify-content: center;
        align-items: center;
        animation: fadeIn 0.3s ease;
        backdrop-filter: blur(5px);
    `;
    
    const modal = document.createElement('div');
    modal.style.cssText = `
        background: white;
        border-radius: 20px;
        padding: 30px;
        width: 90%;
        max-width: 500px;
        max-height: 80vh;
        overflow-y: auto;
        animation: slideUp 0.3s ease;
        position: relative;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    `;
    
    let itemsHTML = '';
    shoppingCart.items.forEach((item, index) => {
        const itemTotal = parseInt(item.price) * item.quantity;
        itemsHTML += `
            <div style="border-bottom: 1px solid #eee; padding: 20px 0; animation: slideUp 0.3s ease ${index * 0.1}s both;">
                <div style="display: flex; justify-content: space-between; align-items: start; gap: 15px;">
                    <div style="flex: 1;">
                        <strong style="font-size: 16px; color: #2c3e50;">${item.title}</strong>
                        <div style="color: #666; font-size: 14px; margin-top: 8px;">
                            ${item.price} ₽ × ${item.quantity} = <strong>${itemTotal} ₽</strong>
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <button onclick="updateQuantity(${index}, ${item.quantity - 1})" 
                                style="width: 32px; height: 32px; border: 1px solid #ddd; background: white; border-radius: 8px; cursor: pointer; font-size: 16px; transition: all 0.3s ease;">
                            -
                        </button>
                        <span style="font-weight: bold; min-width: 30px; text-align: center;">${item.quantity}</span>
                        <button onclick="updateQuantity(${index}, ${item.quantity + 1})" 
                                style="width: 32px; height: 32px; border: 1px solid #ddd; background: white; border-radius: 8px; cursor: pointer; font-size: 16px; transition: all 0.3s ease;">
                            +
                        </button>
                        <button onclick="removeFromCart(${index})" 
                                style="background: none; border: none; color: #ff4757; cursor: pointer; font-size: 24px; margin-left: 10px; transition: transform 0.3s ease;"
                                title="Удалить">
                            ×
                        </button>
                    </div>
                </div>
            </div>
        `;
    });
    
    const total = shoppingCart.getTotal();
    
    modal.innerHTML = `
        <h2 style="margin-top: 0; color: #6a11cb; display: flex; align-items: center; gap: 10px; font-size: 24px;">
            <i class="fas fa-shopping-cart"></i> Ваша корзина
            <button onclick="this.closest('div').parentElement.remove();" 
                    style="position: absolute; top: 20px; right: 20px; background: none; border: none; color: #666; font-size: 28px; cursor: pointer; transition: all 0.3s ease;"
                    title="Закрыть">
                ×
            </button>
        </h2>
        <div style="max-height: 300px; overflow-y: auto; margin: 25px 0; padding-right: 10px;">
            ${itemsHTML || '<div style="text-align: center; padding: 40px; color: #999;">Корзина пуста</div>'}
        </div>
        <div style="border-top: 2px solid #6a11cb; margin-top: 20px; padding-top: 20px;">
            <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 20px;">
                <span>Итого:</span>
                <span>${total} ₽</span>
            </div>
        </div>
        <div style="margin-top: 30px; display: flex; gap: 15px; flex-wrap: wrap;">
            <button onclick="checkout()" 
                    style="flex: 2; min-width: 200px; padding: 15px; background: linear-gradient(135deg, #6a11cb, #2575fc); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 16px; display: flex; align-items: center; justify-content: center; gap: 10px; transition: all 0.3s ease;">
                <i class="fab fa-telegram"></i> Оформить в Telegram
            </button>
            <button onclick="clearCart()" 
                    style="flex: 1; min-width: 100px; padding: 15px; background: #f5f5f5; color: #666; border: none; border-radius: 10px; cursor: pointer; font-size: 16px; transition: all 0.3s ease;">
                Очистить
            </button>
        </div>
    `;
    
    overlay.appendChild(modal);
    document.body.appendChild(overlay);
    
    // Закрытие по клику вне модального окна
    overlay.addEventListener('click', (e) => {
        if (e.target === overlay) overlay.remove();
    });
}

function updateQuantity(index, newQuantity) {
    if (shoppingCart.updateQuantity(index, newQuantity)) {
        updateCart();
        showCart();
    }
}

function removeFromCart(index) {
    if (shoppingCart.removeItem(index)) {
        updateCart();
        showNotification('🗑️ Товар удален из корзины', 'info');
        showCart();
    }
}

function clearCart() {
    shoppingCart.clear();
    updateCart();
    document.querySelector('[style*="background: rgba(0,0,0,0.5)"]')?.remove();
    showNotification('🧹 Корзина очищена', 'info');
}

function checkout() {
    if (shoppingCart.items.length === 0) return;
    
    let orderText = "🎁 Здравствуйте! Хочу приобрести:\n\n";
    
    shoppingCart.items.forEach((item, index) => {
        const itemTotal = parseInt(item.price) * item.quantity;
        orderText += `${index + 1}. ${item.title}\n`;
        orderText += `   📦 Количество: ${item.quantity} шт.\n`;
        orderText += `   💰 Цена: ${item.price} ₽ × ${item.quantity} = ${itemTotal} ₽\n\n`;
    });
    
    const total = shoppingCart.getTotal();
    orderText += `💰 Итого: ${total} ₽\n\n`;
    orderText += "---\n";
    orderText += "📞 Ожидаю информацию о доставке и оплате.";
    
    const telegramLink = "https://t.me/NewshopNm";
    const encodedText = encodeURIComponent(orderText);
    const fullLink = `${telegramLink}?text=${encodedText}`;
    
    window.open(fullLink, '_blank');
    clearCart();
}

// УВЕДОМЛЕНИЯ
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? '#4CAF50' : type === 'error' ? '#f44336' : '#2196f3'};
        color: white;
        padding: 15px 25px;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        z-index: 10001;
        animation: slideInRight 0.3s ease;
        max-width: 350px;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 12px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.1);
    `;
    
    notification.innerHTML = `
        <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
        <span>${message}</span>
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.animation = 'slideOutRight 0.3s ease';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
    
    // Закрытие по клику
    notification.onclick = () => {
        notification.style.animation = 'slideOutRight 0.3s ease';
        setTimeout(() => notification.remove(), 300);
    };
}

// МОБИЛЬНОЕ МЕНЮ
class MobileMenu {
    constructor() {
        this.menuToggle = document.querySelector('.menu-toggle');
        this.navMenu = document.querySelector('.nav-menu');
        this.init();
    }
    
    init() {
        if (!this.menuToggle || !this.navMenu) return;
        
        this.setupEventListeners();
        this.setupAccessibility();
    }
    
    setupEventListeners() {
        this.menuToggle.addEventListener('click', () => this.toggleMenu());
        
        this.navMenu.addEventListener('click', (e) => {
            if (e.target.tagName === 'A') {
                this.closeMenu();
            }
        });
        
        document.addEventListener('click', this.handleOutsideClick.bind(this));
        document.addEventListener('keydown', this.handleEscapeKey.bind(this));
        
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768 && this.navMenu.classList.contains('active')) {
                this.closeMenu();
            }
        });
    }
    
    setupAccessibility() {
        this.menuToggle.setAttribute('aria-label', 'Открыть меню');
        this.menuToggle.setAttribute('aria-expanded', 'false');
        this.menuToggle.setAttribute('aria-controls', 'nav-menu');
        this.navMenu.setAttribute('id', 'nav-menu');
    }
    
    toggleMenu() {
        if (this.navMenu.classList.contains('active')) {
            this.closeMenu();
        } else {
            this.openMenu();
        }
    }
    
    openMenu() {
        this.navMenu.classList.add('active');
        this.menuToggle.setAttribute('aria-expanded', 'true');
        this.menuToggle.querySelector('i').className = 'fas fa-times';
        document.body.style.overflow = 'hidden';
        
        const firstLink = this.navMenu.querySelector('a');
        if (firstLink) firstLink.focus();
    }
    
    closeMenu() {
        this.navMenu.classList.remove('active');
        this.menuToggle.setAttribute('aria-expanded', 'false');
        this.menuToggle.querySelector('i').className = 'fas fa-bars';
        document.body.style.overflow = '';
        this.menuToggle.focus();
    }
    
    handleOutsideClick(e) {
        if (this.navMenu.classList.contains('active') && 
            !this.navMenu.contains(e.target) && 
            !this.menuToggle.contains(e.target)) {
            this.closeMenu();
        }
    }
    
    handleEscapeKey(e) {
        if (e.key === 'Escape' && this.navMenu.classList.contains('active')) {
            this.closeMenu();
        }
    }
}

// ГЛАВНАЯ ИНИЦИАЛИЗАЦИЯ
document.addEventListener('DOMContentLoaded', function() {
    console.log('🚀 Магазин игрушек загружается...');
    
    // Загружаем изображения товаров
    loadProductImages();
    
    // Инициализация корзины
    updateCart();
    
    // Инициализация меню
    new MobileMenu();
    
    // Настройка корзины
    const cartIcon = document.getElementById('cart-icon');
    if (cartIcon) {
        cartIcon.addEventListener('click', showCart);
    }
    
    // Плавная прокрутка для ссылок
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            if (targetId === '#') return;
            
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                targetElement.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
    
    console.log('✅ Магазин готов к работе!');
});

// Глобальные функции
window.updateQuantity = updateQuantity;
window.removeFromCart = removeFromCart;
window.checkout = checkout;
window.clearCart = clearCart;
window.openProductModal = openProductModal;
window.closeProductModal = closeProductModal;
window.changeModalPhoto = changeModalPhoto;
window.addToCart = addToCart;
window.showCart = showCart;
</script>
    
    <script src="newyear.js"></script>


document.addEventListener('DOMContentLoaded', function() {
    const menuToggle = document.querySelector('.menu-toggle');
    const navMenu = document.querySelector('.nav-menu');
    
    if (menuToggle) {
        menuToggle.addEventListener('click', function() {
            navMenu.classList.toggle('active');
        });
    }
    
    // Закрытие меню при клике на ссылку
    const navLinks = document.querySelectorAll('.nav-menu a');
    navLinks.forEach(link => {
        link.addEventListener('click', function() {
            navMenu.classList.remove('active');
        });
    });
});
</script>
</body>
</html>  
