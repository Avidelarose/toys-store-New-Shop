<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Магазин игрушек - Детские игрушки и игры</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        body.modal-open {
            overflow: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }

        header {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            color: #ffd700;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .nav-menu {
            display: flex;
            gap: 25px;
            list-style: none;
        }

        .nav-menu a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            font-size: 18px;
            padding: 8px 15px;
            border-radius: 5px;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-menu a:hover {
            background-color: rgba(255,255,255,0.15);
            transform: translateY(-2px);
        }

        .nav-menu a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: #ffd700;
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }

        .nav-menu a:hover::after {
            width: 80%;
        }

        .cart-icon {
            position: relative;
            font-size: 24px;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            background-color: rgba(255,255,255,0.1);
            transition: all 0.3s ease;
        }

        .cart-icon:hover {
            background-color: rgba(255,255,255,0.2);
            transform: scale(1.1) rotate(10deg);
        }

        #cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #ff4757;
            color: white;
            font-size: 12px;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            display: none;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 10px;
            transition: transform 0.3s ease;
        }

        .menu-toggle:hover {
            transform: rotate(90deg);
        }

        .hero {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(rgba(106, 17, 203, 0.9), rgba(37, 117, 252, 0.9));
            color: white;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            animation: slideUp 0.8s ease-out;
        }

        .hero h1 {
            font-size: 42px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: fadeIn 1s ease-out 0.3s both;
        }

        .hero p {
            font-size: 20px;
            max-width: 800px;
            margin: 0 auto 30px;
            opacity: 0.9;
            animation: fadeIn 1s ease-out 0.6s both;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 30px;
            margin-top: 40px;
            animation: fadeIn 1s ease-out 0.9s both;
        }

        .product-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.4s ease;
            position: relative;
            animation: slideUp 0.5s ease-out;
        }

        .product-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #6a11cb, #2575fc);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .product-card:hover::before {
            transform: scaleX(1);
        }

        .product-gallery {
            height: 300px;
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            cursor: pointer;
        }

        .product-gallery img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: transform 0.5s ease;
            padding: 15px;
        }

        .product-card:hover .product-gallery img {
            transform: scale(1.05);
        }

        .product-info {
            padding: 20px;
        }

        .product-title {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .product-description {
            color: #7f8c8d;
            font-size: 15px;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .product-price {
            font-size: 26px;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .product-price::before {
            content: '₽';
            font-size: 20px;
        }

        .add-to-cart {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .add-to-cart::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .add-to-cart:hover::before {
            width: 300px;
            height: 300px;
        }

        .add-to-cart:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(37, 117, 252, 0.4);
        }

        .add-to-cart:active {
            transform: translateY(0);
        }

        .add-to-cart i {
            font-size: 18px;
            transition: transform 0.3s ease;
        }

        .add-to-cart:hover i {
            transform: scale(1.2) rotate(10deg);
        }

        /* МОДАЛЬНОЕ ОКНО В СТИЛЕ АВИТО */
        .avito-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            animation: fadeIn 0.3s ease;
            overflow-y: auto;
        }

        .avito-modal.active {
            display: block;
        }

        .avito-modal__back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            z-index: 2001;
            display: flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .avito-modal__back-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(-5px);
        }

        .avito-modal__content {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .avito-modal__gallery {
            flex: 1;
            position: relative;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 60vh;
            padding: 80px 20px 40px;
        }

        .avito-modal__image-container {
            width: 100%;
            max-width: 900px;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .avito-modal__image {
            max-width: 100%;
            max-height: 70vh;
            object-fit: contain;
            border-radius: 8px;
            transition: transform 0.3s ease;
            cursor: zoom-in;
        }

        .avito-modal__image.zoomed {
            transform: scale(1.5);
            cursor: zoom-out;
        }

        .avito-modal__nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .avito-modal__nav-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-50%) scale(1.1);
        }

        .avito-modal__nav-prev {
            left: 20px;
        }

        .avito-modal__nav-next {
            right: 20px;
        }

        .avito-modal__dots {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 10px;
            z-index: 10;
        }

        .avito-modal__dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .avito-modal__dot.active {
            background: white;
            transform: scale(1.3);
        }

        .avito-modal__info {
            background: white;
            border-radius: 25px 25px 0 0;
            padding: 30px 25px;
            margin-top: -25px;
            position: relative;
            z-index: 5;
            box-shadow: 0 -5px 30px rgba(0,0,0,0.1);
            animation: slideUpInfo 0.4s ease-out 0.2s both;
        }

        @keyframes slideUpInfo {
            from {
                transform: translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .avito-modal__title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .avito-modal__price {
            font-size: 32px;
            font-weight: bold;
            color: #ff3b30;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .avito-modal__price::before {
            content: '₽';
            font-size: 28px;
        }

        .avito-modal__section-title {
            font-size: 18px;
            font-weight: 600;
            margin: 25px 0 15px 0;
            color: #333;
            padding-bottom: 8px;
            border-bottom: 2px solid #f0f0f0;
        }

        .avito-modal__description {
            font-size: 16px;
            line-height: 1.6;
            color: #555;
            margin-bottom: 10px;
        }

        .avito-modal__details {
            margin-top: 20px;
        }

        .avito-modal__detail-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #f5f5f5;
        }

        .avito-modal__detail-label {
            color: #777;
            font-size: 15px;
        }

        .avito-modal__detail-value {
            color: #333;
            font-weight: 500;
            font-size: 15px;
            text-align: right;
        }

        .avito-modal__cart-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-top: 30px;
            transition: all 0.3s ease;
        }

        .avito-modal__cart-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(37, 117, 252, 0.4);
        }

        /* КОРЗИНА НА СТРАНИЦЕ */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 30px rgba(0,0,0,0.15);
            z-index: 1001;
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
        }

        .cart-sidebar.active {
            right: 0;
        }

        .cart-header {
            padding: 25px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
        }

        .cart-header h2 {
            font-size: 24px;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .cart-close {
            background: none;
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .cart-close:hover {
            background: rgba(255,255,255,0.2);
            transform: rotate(90deg);
        }

        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .cart-item {
            display: flex;
            gap: 15px;
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            animation: slideInRight 0.3s ease;
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item-img {
            width: 80px;
            height: 80px;
            object-fit: contain;
            border-radius: 8px;
            background: #f5f5f5;
            padding: 8px;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
            font-size: 16px;
        }

        .cart-item-price {
            color: #e74c3c;
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 10px;
        }

        .cart-item-actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 5px 10px;
        }

        .quantity-btn {
            width: 28px;
            height: 28px;
            border: none;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            background: #e9ecef;
            transform: scale(1.1);
        }

        .quantity-value {
            min-width: 30px;
            text-align: center;
            font-weight: 600;
        }

        .cart-item-remove {
            background: none;
            border: none;
            color: #ff4757;
            cursor: pointer;
            font-size: 20px;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .cart-item-remove:hover {
            background: #ffeaea;
            transform: rotate(90deg);
        }

        .cart-footer {
            padding: 25px;
            border-top: 1px solid #eee;
            background: #f8f9fa;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            font-size: 20px;
            font-weight: bold;
        }

        .cart-total-label {
            color: #555;
        }

        .cart-total-value {
            color: #6a11cb;
            font-size: 24px;
        }

        .cart-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .cart-checkout-btn {
            padding: 16px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .cart-checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(37, 117, 252, 0.4);
        }

        .cart-clear-btn {
            padding: 12px;
            background: #f8f9fa;
            color: #666;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cart-clear-btn:hover {
            background: #fff;
            border-color: #ff4757;
            color: #ff4757;
        }

        .cart-empty {
            text-align: center;
            padding: 50px 20px;
            color: #999;
        }

        .cart-empty i {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 40px 20px;
            margin-top: 60px;
            border-radius: 15px 15px 0 0;
            animation: fadeIn 1s ease-out 1.2s both;
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: #bdc3c7;
            text-decoration: none;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-links a:hover {
            color: white;
            transform: translateY(-2px);
        }

        .copyright {
            margin-top: 20px;
            color: #95a5a6;
            font-size: 14px;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slideInRight {
            from { transform: translateX(20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Адаптивность */
        @media (max-width: 768px) {
            .menu-toggle {
                display: block;
            }

            .nav-menu {
                position: fixed;
                top: 70px;
                left: 0;
                right: 0;
                background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
                flex-direction: column;
                padding: 20px;
                transform: translateY(-100%);
                opacity: 0;
                transition: all 0.4s ease;
                z-index: 999;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                border-radius: 0 0 15px 15px;
            }

            .nav-menu.active {
                transform: translateY(0);
                opacity: 1;
            }

            .hero h1 {
                font-size: 32px;
            }

            .hero p {
                font-size: 18px;
            }

            .products-grid {
                grid-template-columns: 1fr;
            }

            .cart-sidebar {
                width: 100%;
                right: -100%;
            }

            .cart-sidebar.active {
                right: 0;
            }

            .avito-modal__nav-btn {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }

            .avito-modal__nav-prev {
                left: 10px;
            }

            .avito-modal__nav-next {
                right: 10px;
            }

            .avito-modal__gallery {
                padding: 70px 15px 30px;
                min-height: 50vh;
            }

            .avito-modal__info {
                padding: 25px 20px;
            }

            .avito-modal__title {
                font-size: 22px;
            }

            .avito-modal__price {
                font-size: 28px;
            }

            .avito-modal__cart-btn {
                padding: 16px;
                font-size: 16px;
            }

            .footer-links {
                flex-direction: column;
                gap: 15px;
            }
        }

        @media (max-width: 480px) {
            .hero {
                padding: 40px 15px;
            }

            .hero h1 {
                font-size: 28px;
            }

            .container {
                padding: 15px;
            }

            .product-card {
                margin: 0 10px;
            }

            .avito-modal__back-btn {
                top: 15px;
                left: 15px;
                padding: 10px 15px;
                font-size: 14px;
            }

            .avito-modal__gallery {
                padding: 60px 10px 25px;
                min-height: 40vh;
            }

            .avito-modal__info {
                padding: 20px 15px;
            }

            .cart-item {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .cart-item-img {
                width: 120px;
                height: 120px;
            }
        }
    </style>
</head>
<body>
    <!-- Шапка -->
    <header>
        <div class="header-container">
            <div class="logo">
                <i class="fas fa-dragon"></i>
                <span>MagicToys</span>
            </div>
            
            <button class="menu-toggle" aria-label="Меню" aria-expanded="false">
                <i class="fas fa-bars"></i>
            </button>
            
            <ul class="nav-menu" id="nav-menu">
                <li><a href="#home"><i class="fas fa-home"></i> Главная</a></li>
                <li><a href="#products"><i class="fas fa-gifts"></i> Товары</a></li>
                <li><a href="#contact"><i class="fas fa-phone"></i> Контакты</a></li>
            </ul>
            
            <div class="cart-icon" id="cart-icon" aria-label="Корзина">
                <i class="fas fa-shopping-cart"></i>
                <span id="cart-badge" aria-live="polite">0</span>
            </div>
        </div>
    </header>

    <!-- Основной контент -->
    <div class="container">
        <!-- Герой-секция -->
        <section class="hero" id="home">
            <h1>Мир волшебных игрушек для детей и взрослых!</h1>
            <p>Откройте для себя уникальную коллекцию качественных игрушек, которые подарят радость и незабываемые эмоции. От классики до современных хитов - всё для счастливого детства!</p>
            <div style="margin-top: 30px;">
                <button class="add-to-cart" onclick="document.querySelector('#products').scrollIntoView({behavior: 'smooth'})" style="width: auto; padding: 12px 30px;">
                    <i class="fas fa-arrow-down"></i> Смотреть товары
                </button>
            </div>
        </section>

        <!-- Секция товаров -->
        <section id="products">
            <h2 style="text-align: center; margin-bottom: 30px; color: #2c3e50; font-size: 32px;">
                <i class="fas fa-star" style="color: #ffd700;"></i> Популярные товары
            </h2>
            
            <div class="products-grid">
                <!-- Дракон -->
                <div class="product-card" data-product="dragon">
                    <div class="product-gallery" onclick="openAvitoModal('dragon')">
                        <img id="dragon-img" src="" alt="Дракон светящийся в темноте">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Дракон светящийся в темноте</h3>
                        <p class="product-description">Великолепный светящийся дракон с подвижными крыльями. Светится в темноте! Безопасен для детей от 5 лет.</p>
                        <div class="product-price">350</div>
                        <button class="add-to-cart" onclick="addToCart('dragon', 'Дракон светящийся в темноте', '350')">
                            <i class="fas fa-cart-plus"></i> В корзину
                        </button>
                    </div>
                </div>

                <!-- Какаши -->
                <div class="product-card" data-product="kakashi">
                    <div class="product-gallery" onclick="openAvitoModal('kakashi')">
                        <img id="kakashi-img" src="" alt="Фигурка Какаши">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Фигурка Какаши Хатаке</h3>
                        <p class="product-description">Детализированная коллекционная фигурка из аниме Наруто. Высота: 18 см, материал: высококачественный ПВХ.</p>
                        <div class="product-price">899</div>
                        <button class="add-to-cart" onclick="addToCart('kakashi', 'Фигурка Какаши', '899')">
                            <i class="fas fa-cart-plus"></i> В корзину
                        </button>
                    </div>
                </div>

                <!-- Пистолет -->
                <div class="product-card" data-product="pistol">
                    <div class="product-gallery" onclick="openAvitoModal('pistol')">
                        <img id="pistol-img" src="" alt="Пистолет с пульками">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Пистолет с мягкими пульками</h3>
                        <p class="product-description">Безопасный пистолет для детей. В комплекте: пистолет, 20 мягких пулек, мишень. Для детей от 6 лет.</p>
                        <div class="product-price">599</div>
                        <button class="add-to-cart" onclick="addToCart('pistol', 'Пистолет с пульками', '599')">
                            <i class="fas fa-cart-plus"></i> В корзину
                        </button>
                    </div>
                </div>

                <!-- Лабубу -->
                <div class="product-card" data-product="labubu">
                    <div class="product-gallery" onclick="openAvitoModal('labubu')">
                        <img id="labubu-img" src="" alt="Фигурка Лабубу">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Коллекционная фигурка Лабубу</h3>
                        <p class="product-description">Милая фигурка Лабубу разных цветов. Высота: 10 см. Идеально для коллекции или подарка.</p>
                        <div class="product-price">1 499</div>
                        <button class="add-to-cart" onclick="addToCart('labubu', 'Фигурка Лабубу', '1499')">
                            <i class="fas fa-cart-plus"></i> В корзину
                        </button>
                    </div>
                </div>

                <!-- Домик -->
                <div class="product-card" data-product="house">
                    <div class="product-gallery" onclick="openAvitoModal('house')">
                        <img id="house-img" src="" alt="Новогодний домик">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Волшебный новогодний домик</h3>
                        <p class="product-description">Светящийся новогодний домик с подсветкой и зимним декором. Создает праздничное настроение! Работает от батареек.</p>
                        <div class="product-price">1 799</div>
                        <button class="add-to-cart" onclick="addToCart('house', 'Новогодний домик', '1799')">
                            <i class="fas fa-cart-plus"></i> В корзину
                        </button>
                    </div>
                </div>

                <!-- UNO -->
                <div class="product-card" data-product="uno">
                    <div class="product-gallery" onclick="openAvitoModal('uno')">
                        <img id="uno-img" src="" alt="Игра UNO">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">Настольная игра UNO</h3>
                        <p class="product-description">Классическая карточная игра для всей семьи. От 2 до 10 игроков. Отличный подарок для детей и взрослых.</p>
                        <div class="product-price">399</div>
                        <button class="add-to-cart" onclick="addToCart('uno', 'Игра UNO', '399')">
                            <i class="fas fa-cart-plus"></i> В корзину
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Модальное окно в стиле Авито -->
    <div id="avitoModal" class="avito-modal" onclick="closeAvitoModal(event)">
        <button class="avito-modal__back-btn" onclick="closeAvitoModal()">
            <i class="fas fa-arrow-left"></i> Назад к каталогу
        </button>
        
        <div class="avito-modal__content" onclick="event.stopPropagation()">
            <div class="avito-modal__gallery">
                <div class="avito-modal__image-container">
                    <img id="avitoModalImage" class="avito-modal__image" src="" alt="Фото товара">
                </div>
                
                <button class="avito-modal__nav-btn avito-modal__nav-prev" onclick="changeAvitoPhoto(-1)">
                    ‹
                </button>
                <button class="avito-modal__nav-btn avito-modal__nav-next" onclick="changeAvitoPhoto(1)">
                    ›
                </button>
                
                <div class="avito-modal__dots" id="avitoModalDots"></div>
            </div>
            
            <div class="avito-modal__info">
                <h1 class="avito-modal__title" id="avitoModalTitle"></h1>
                <div class="avito-modal__price" id="avitoModalPrice"></div>
                
                <div class="avito-modal__section-title">Описание</div>
                <p class="avito-modal__description" id="avitoModalDescription"></p>
                
                <div class="avito-modal__section-title">Характеристики</div>
                <div class="avito-modal__details" id="avitoModalDetails"></div>
                
                <button class="avito-modal__cart-btn" id="avitoModalCartBtn">
                    <i class="fas fa-cart-plus"></i> Добавить в корзину
                </button>
            </div>
        </div>
    </div>

    <!-- Боковая панель корзины -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h2><i class="fas fa-shopping-cart"></i> Корзина</h2>
            <button class="cart-close" onclick="toggleCart()">×</button>
        </div>
        
        <div class="cart-items" id="cartItems">
            <!-- Товары будут добавляться сюда динамически -->
        </div>
        
        <div class="cart-footer">
            <div class="cart-total">
                <span class="cart-total-label">Итого:</span>
                <span class="cart-total-value" id="cartTotalValue">0 ₽</span>
            </div>
            
            <div class="cart-actions">
                <button class="cart-checkout-btn" onclick="checkout()">
                    <i class="fab fa-telegram"></i> Оформить в Telegram
                </button>
                <button class="cart-clear-btn" onclick="clearCart()">
                    <i class="fas fa-trash"></i> Очистить корзину
                </button>
            </div>
        </div>
    </div>

    <!-- Подвал -->
    <footer id="contact">
        <div class="footer-content">
            <h3 style="font-size: 28px; margin-bottom: 20px;">MagicToys</h3>
            <p style="font-size: 16px; opacity: 0.9; max-width: 600px; margin: 0 auto 30px;">
                Сделаем детство вашего ребенка волшебным! Мы всегда на связи и готовы помочь с выбором идеальной игрушки.
            </p>
            <div class="footer-links">
                <a href="https://t.me/NewshopNm" target="_blank"><i class="fab fa-telegram"></i> Telegram</a>
                <a href="tel:+79991234567"><i class="fas fa-phone"></i> +7 (999) 123-45-67</a>
                <a href="mailto:info@magictoys.ru"><i class="fas fa-envelope"></i> info@magictoys.ru</a>
                <a href="#"><i class="fas fa-map-marker-alt"></i> Москва, ул. Игрушечная, 15</a>
            </div>
            <div class="copyright">
                © 2024 MagicToys. Все права защищены. Сделано с ❤️ для любителей игрушек
            </div>
        </div>
    </footer>

<script>
// ДАННЫЕ ТОВАРОВ
const productData = {
    'dragon': {
        name: 'Дракон светящийся в темноте',
        price: '350',
        description: 'Великолепный светящийся дракон с подвижными крыльями и реалистичными звуковыми эффектами. Игрушка полностью безопасна для детей, изготовлена из высококачественного пластика без острых краев. В темноте дракон светится нежным зеленым свечением, что создает волшебную атмосферу в детской комнате. Крылья подвижные, позволяют принимать различные позы. Работает от 3-х батареек АА (в комплект не входят).',
        details: {
            'Артикул': 'DRG-2024',
            'Возраст': '5+ лет',
            'Материал': 'Пластик, электронные компоненты',
            'Размер': '25 × 18 × 12 см',
            'В наличии': 'Да',
            'Цвет': 'Белый с зеленой подсветкой',
            'Вес': '450 г',
            'Особенности': 'Светится в темноте, звуковые эффекты'
        },
        photos: [
            {url: 'toys-images/dragons/white.png', alt: 'Белый светящийся дракон'},
            {url: 'https://via.placeholder.com/800x600/4CAF50/FFFFFF?text=Дракон+вид+2', alt: 'Дракон сбоку'},
            {url: 'https://via.placeholder.com/800x600/4CAF50/FFFFFF?text=Дракон+вид+3', alt: 'Дракон с подсветкой'}
        ]
    },
    'kakashi': {
        name: 'Фигурка Какаши Хатаке',
        price: '899',
        description: 'Детализированная коллекционная фигурка легендарного персонажа из аниме "Наруто" - Какаши Хатаке. Выполнена с высокой точностью: проработаны все детали костюма, включая маску, шрам на глазу и знак деревни. Фигурка имеет 12 точек артикуляции, что позволяет воссоздавать любые позы из сериала. В комплекте идут сменные руки и оружие. Отличный подарок для фанатов Наруто и коллекционеров.',
        details: {
            'Артикул': 'KKSH-001',
            'Возраст': '14+ лет',
            'Материал': 'ПВХ, ABS пластик',
            'Размер': '18 × 8 × 6 см',
            'В наличии': 'Да',
            'Цвет': 'Серебристый, синий, черный',
            'Вес': '320 г',
            'Особенности': '12 точек артикуляции, сменные аксессуары'
        },
        photos: [
            {url: 'toys-images/kakahi/blu.png', alt: 'Фигурка Какаши'},
            {url: 'https://via.placeholder.com/800x600/2196F3/FFFFFF?text=Какаши+вид+2', alt: 'Какаши вид сбоку'},
            {url: 'https://via.placeholder.com/800x600/2196F3/FFFFFF?text=Какаши+вид+3', alt: 'Какаши с оружием'}
        ]
    },
    'pistol': {
        name: 'Пистолет с мягкими пульками',
        price: '599',
        description: 'Безопасный пистолет для детей с мягкими пульками. Идеально подходит для активных игр на свежем воздухе. Пульки изготовлены из мягкого поролона, совершенно безопасны при попадании. Пистолет имеет реалистичный дизайн, но выполнен в ярких цветах для привлечения внимания детей. В комплекте: пистолет, 20 мягких пулек, мишень. Развивает координацию движений и меткость.',
        details: {
            'Артикул': 'PST-2024',
            'Возраст': '6+ лет',
            'Материал': 'Пластик, поролон',
            'Размер': '22 × 15 × 5 см',
            'В наличии': 'Да',
            'Цвет': 'Желтый, оранжевый',
            'Вес': '280 г',
            'Особенности': '20 пулек в комплекте, безопасные материалы'
        },
        photos: [
            {url: 'toys-images/pistol/yellow.png', alt: 'Желтый пистолет с пульками'},
            {url: 'https://via.placeholder.com/800x600/FFC107/000000?text=Пистолет+вид+2', alt: 'Комплект пулек'},
            {url: 'https://via.placeholder.com/800x600/FFC107/000000?text=Пистолет+вид+3', alt: 'Пистолет и мишень'}
        ]
    },
    'labubu': {
        name: 'Коллекционная фигурка Лабубу',
        price: '1499',
        description: 'Очаровательная коллекционная фигурка Лабубу от популярной серии. Каждая фигурка уникальна и имеет свои характерные черты. Выполнена из высококачественного винила с детальной росписью. Отличный подарок для коллекционеров фигурок и поклонников современной поп-культуры. Фигурка упакована в фирменную подарочную коробку.',
        details: {
            'Артикул': 'LBB-001',
            'Возраст': '12+ лет',
            'Материал': 'Винил, акриловая краска',
            'Размер': '10 × 8 × 8 см',
            'В наличии': 'Да',
            'Цвет': 'Разные цвета',
            'Вес': '180 г',
            'Особенности': 'Коллекционная, подарочная упаковка'
        },
        photos: [
            {url: 'toys-images/labubu/grey.jpg', alt: 'Серый Лабубу'},
            {url: 'toys-images/labubu/purple.jpg', alt: 'Фиолетовый Лабубу'},
            {url: 'toys-images/labubu/red.jpg', alt: 'Красный Лабубу'},
            {url: 'toys-images/labubu/white.jpg', alt: 'Белый Лабубу'}
        ]
    },
    'house': {
        name: 'Волшебный новогодний домик',
        price: '1799',
        description: 'Сказочный новогодний домик с подсветкой и зимним декором. Идеально создает праздничное настроение! Домик имеет реалистичную архитектуру с детализированными элементами: снег на крыше, светящиеся окна, дым из трубы. Внутри домика находится миниатюрная новогодняя сцена. Работает от 2-х батареек АА. Отличное украшение для новогоднего стола или интерьера.',
        details: {
            'Артикул': 'HSE-2024',
            'Возраст': '3+ лет',
            'Материал': 'Пластик, светодиоды',
            'Размер': '20 × 15 × 18 см',
            'В наличии': 'Да',
            'Цвет': 'Белый, голубой, золотой',
            'Вес': '520 г',
            'Особенности': 'Светящиеся окна, новогодний декор'
        },
        photos: [
            {url: 'https://via.placeholder.com/800x600/FF5722/FFFFFF?text=Новогодний+домик', alt: 'Новогодний домик с подсветкой'}
        ]
    },
    'uno': {
        name: 'Настольная игра UNO',
        price: '399',
        description: 'Классическая карточная игра для всей семьи. Правила просты и понятны даже детям: нужно быстрее всех избавиться от своих карт, выполняя специальные действия. Игра развивает логическое мышление, внимание и скорость реакции. В комплекте: 112 карт, правила игры на русском языке. Отличный подарок для семейного досуга и вечеринок с друзьями.',
        details: {
            'Артикул': 'UNO-001',
            'Возраст': '7+ лет',
            'Материал': 'Картон',
            'Размер': '9.5 × 6 × 2.5 см',
            'В наличии': 'Да',
            'Цвет': 'Разноцветный',
            'Вес': '150 г',
            'Особенности': '2-10 игроков, правила на русском'
        },
        photos: [
            {url: 'https://via.placeholder.com/800x600/3F51B5/FFFFFF?text=Игра+UNO+коробка', alt: 'Коробка игры UNO'},
            {url: 'https://via.placeholder.com/800x600/3F51B5/FFFFFF?text=Карты+UNO', alt: 'Карты игры UNO'}
        ]
    }
};

// ГЛОБАЛЬНЫЕ ПЕРЕМЕННЫЕ ДЛЯ МОДАЛЬНОГО ОКНА
let currentAvitoProduct = null;
let currentAvitoPhotoIndex = 0;
let isZoomed = false;

// КОРЗИНА
let shoppingCart = {
    items: JSON.parse(localStorage.getItem('cart')) || [],
    
    addItem: function(item) {
        const existing = this.items.find(i => i.id === item.id);
        if (existing) {
            existing.quantity += 1;
        } else {
            this.items.push({...item, quantity: 1});
        }
        this.save();
        updateCart();
        updateCartDisplay();
        showNotification(`✅ Добавлено: ${item.title}`, 'success');
    },
    
    removeItem: function(index) {
        if (index >= 0 && index < this.items.length) {
            this.items.splice(index, 1);
            this.save();
            updateCart();
            updateCartDisplay();
            return true;
        }
        return false;
    },
    
    updateQuantity: function(index, newQuantity) {
        if (index >= 0 && index < this.items.length) {
            if (newQuantity < 1) {
                return this.removeItem(index);
            }
            this.items[index].quantity = newQuantity;
            this.save();
            updateCart();
            updateCartDisplay();
            return true;
        }
        return false;
    },
    
    clear: function() {
        this.items = [];
        this.save();
        updateCart();
        updateCartDisplay();
    },
    
    getTotal: function() {
        return this.items.reduce((sum, item) => sum + (parseInt(item.price) * item.quantity), 0);
    },
    
    getCount: function() {
        return this.items.reduce((sum, item) => sum + item.quantity, 0);
    },
    
    save: function() {
        localStorage.setItem('cart', JSON.stringify(this.items));
    }
};

// ЗАГРУЗКА ИЗОБРАЖЕНИЙ ТОВАРОВ
function loadProductImages() {
    const products = ['dragon', 'kakashi', 'pistol', 'labubu', 'house', 'uno'];
    
    products.forEach(productId => {
        const product = productData[productId];
        if (!product || !product.photos || product.photos.length === 0) return;
        
        const imgElement = document.getElementById(`${productId}-img`);
        if (!imgElement) return;
        
        // Пробуем загрузить первое фото
        const firstPhoto = product.photos[0];
        const realImg = new Image();
        
        realImg.onload = () => {
            imgElement.src = firstPhoto.url;
            imgElement.alt = firstPhoto.alt;
        };
        
        realImg.onerror = () => {
            // Если фото не загружается, используем placeholder
            imgElement.src = getPlaceholderUrl(productId, 0);
            imgElement.alt = product.name;
        };
        
        realImg.src = firstPhoto.url;
    });
}

function getPlaceholderUrl(productId, index) {
    const colors = {
        'dragon': '#4CAF50',
        'kakashi': '#2196F3',
        'pistol': '#FFC107',
        'labubu': '#9C27B0',
        'house': '#FF5722',
        'uno': '#3F51B5'
    };
    
    const names = {
        'dragon': 'Дракон',
        'kakashi': 'Какаши',
        'pistol': 'Пистолет',
        'labubu': 'Лабубу',
        'house': 'Домик',
        'uno': 'UNO'
    };
    
    const color = colors[productId] || '#2196F3';
    const name = names[productId] || 'Товар';
    const hexColor = color.startsWith('#') ? color.substring(1) : '2196F3';
    
    return `https://via.placeholder.com/600x400/${hexColor}/FFFFFF?text=${encodeURIComponent(name)}+${index + 1}`;
}

// МОДАЛЬНОЕ ОКНО В СТИЛЕ АВИТО
function openAvitoModal(productId) {
    const product = productData[productId];
    if (!product) return;
    
    currentAvitoProduct = productId;
    currentAvitoPhotoIndex = 0;
    isZoomed = false;
    
    // Заполняем информацию о товаре
    document.getElementById('avitoModalTitle').textContent = product.name;
    document.getElementById('avitoModalPrice').textContent = product.price;
    document.getElementById('avitoModalDescription').textContent = product.description;
    
    // Заполняем детали товара
    const detailsContainer = document.getElementById('avitoModalDetails');
    detailsContainer.innerHTML = '';
    
    for (const [key, value] of Object.entries(product.details)) {
        const detailRow = document.createElement('div');
        detailRow.className = 'avito-modal__detail-row';
        detailRow.innerHTML = `
            <span class="avito-modal__detail-label">${key}</span>
            <span class="avito-modal__detail-value">${value}</span>
        `;
        detailsContainer.appendChild(detailRow);
    }
    
    // Настраиваем кнопку добавления в корзину
    const addToCartBtn = document.getElementById('avitoModalCartBtn');
    addToCartBtn.onclick = (e) => {
        e.stopPropagation();
        addToCart(productId, product.name, product.price);
        closeAvitoModal();
    };
    
    // Загружаем первое изображение
    loadAvitoPhoto(productId, 0);
    
    // Создаем точки навигации
    createAvitoDots(product.photos.length);
    
    // Показываем модальное окно
    const modal = document.getElementById('avitoModal');
    modal.classList.add('active');
    document.body.classList.add('modal-open');
}

function loadAvitoPhoto(productId, index) {
    const product = productData[productId];
    if (!product || !product.photos || index >= product.photos.length) return;
    
    const modalImg = document.getElementById('avitoModalImage');
    const photo = product.photos[index];
    
    // Сбрасываем увеличение при смене фото
    modalImg.classList.remove('zoomed');
    isZoomed = false;
    
    // Показываем placeholder пока загружается изображение
    modalImg.src = getPlaceholderUrl(productId, index);
    
    // Загружаем реальное изображение
    const realImg = new Image();
    realImg.onload = () => {
        modalImg.src = photo.url;
        // Добавляем обработчик клика для увеличения
        modalImg.onclick = (e) => {
            e.stopPropagation();
            toggleZoom();
        };
    };
    realImg.onerror = () => {
        console.log('Не удалось загрузить изображение:', photo.url);
        modalImg.onclick = (e) => {
            e.stopPropagation();
            toggleZoom();
        };
    };
    realImg.src = photo.url;
    
    modalImg.alt = photo.alt;
    
    // Обновляем активную точку
    updateAvitoDots(index);
    currentAvitoPhotoIndex = index;
}

// Функция увеличения/уменьшения фото
function toggleZoom() {
    const modalImg = document.getElementById('avitoModalImage');
    isZoomed = !isZoomed;
    modalImg.classList.toggle('zoomed', isZoomed);
}

function createAvitoDots(total) {
    const dotsContainer = document.getElementById('avitoModalDots');
    dotsContainer.innerHTML = '';
    
    for (let i = 0; i < total; i++) {
        const dot = document.createElement('span');
        dot.className = `avito-modal__dot ${i === 0 ? 'active' : ''}`;
        dot.onclick = (e) => {
            e.stopPropagation();
            loadAvitoPhoto(currentAvitoProduct, i);
        };
        dotsContainer.appendChild(dot);
    }
}

function updateAvitoDots(activeIndex) {
    const dots = document.querySelectorAll('.avito-modal__dot');
    dots.forEach((dot, index) => {
        dot.classList.toggle('active', index === activeIndex);
    });
}

function changeAvitoPhoto(direction) {
    if (!currentAvitoProduct) return;
    
    const product = productData[currentAvitoProduct];
    if (!product || !product.photos || product.photos.length <= 1) return;
    
    const total = product.photos.length;
    let newIndex = (currentAvitoPhotoIndex + direction + total) % total;
    
    loadAvitoPhoto(currentAvitoProduct, newIndex);
}

function closeAvitoModal(event) {
    if (event && event.target.id !== 'avitoModal' && !event.target.classList.contains('avito-modal__back-btn')) {
        return;
    }
    
    const modal = document.getElementById('avitoModal');
    modal.classList.remove('active');
    document.body.classList.remove('modal-open');
    
    currentAvitoProduct = null;
    currentAvitoPhotoIndex = 0;
}

// Закрытие по клавише ESC
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        closeAvitoModal();
        if (document.getElementById('cartSidebar').classList.contains('active')) {
            toggleCart();
        }
    }
});

// Управление корзиной
function toggleCart() {
    const cartSidebar = document.getElementById('cartSidebar');
    cartSidebar.classList.toggle('active');
    document.body.style.overflow = cartSidebar.classList.contains('active') ? 'hidden' : '';
}

function updateCart() {
    const badge = document.getElementById('cart-badge');
    if (badge) {
        const total = shoppingCart.getCount();
        badge.textContent = total;
        badge.style.display = total > 0 ? 'flex' : 'none';
    }
}

function updateCartDisplay() {
    const cartItems = document.getElementById('cartItems');
    const cartTotalValue = document.getElementById('cartTotalValue');
    
    if (shoppingCart.items.length === 0) {
        cartItems.innerHTML = `
            <div class="cart-empty">
                <i class="fas fa-shopping-cart"></i>
                <h3>Корзина пуста</h3>
                <p>Добавьте товары из каталога</p>
            </div>
        `;
        cartTotalValue.textContent = '0 ₽';
        return;
    }
    
    let itemsHTML = '';
    shoppingCart.items.forEach((item, index) => {
        const itemTotal = parseInt(item.price) * item.quantity;
        itemsHTML += `
            <div class="cart-item">
                <img src="${productData[item.id]?.photos[0]?.url || getPlaceholderUrl(item.id, 0)}" 
                     alt="${item.title}" 
                     class="cart-item-img">
                <div class="cart-item-info">
                    <div class="cart-item-title">${item.title}</div>
                    <div class="cart-item-price">${item.price} ₽</div>
                    <div class="cart-item-actions">
                        <div class="cart-item-quantity">
                            <button class="quantity-btn" onclick="updateCartQuantity(${index}, ${item.quantity - 1})">-</button>
                            <span class="quantity-value">${item.quantity}</span>
                            <button class="quantity-btn" onclick="updateCartQuantity(${index}, ${item.quantity + 1})">+</button>
                        </div>
                        <button class="cart-item-remove" onclick="removeFromCart(${index})" title="Удалить">
                            ×
                        </button>
                    </div>
                </div>
            </div>
        `;
    });
    
    cartItems.innerHTML = itemsHTML;
    cartTotalValue.textContent = `${shoppingCart.getTotal()} ₽`;
}

function addToCart(productId, productName, productPrice) {
    const item = { 
        id: productId, 
        title: productName, 
        price: productPrice
    };
    shoppingCart.addItem(item);
}

function updateCartQuantity(index, newQuantity) {
    shoppingCart.updateQuantity(index, newQuantity);
}

function removeFromCart(index) {
    if (shoppingCart.removeItem(index)) {
        showNotification('🗑️ Товар удален из корзины', 'info');
    }
}

function clearCart() {
    shoppingCart.clear();
    showNotification('🧹 Корзина очищена', 'info');
}

function checkout() {
    if (shoppingCart.items.length === 0) {
        showNotification('🛒 Корзина пуста', 'info');
        return;
    }
    
    let orderText = "🎁 Здравствуйте! Хочу приобрести:\n\n";
    
    shoppingCart.items.forEach((item, index) => {
        const itemTotal = parseInt(item.price) * item.quantity;
        orderText += `${index + 1}. ${item.title}\n`;
        orderText += `   📦 Количество: ${item.quantity} шт.\n`;
        orderText += `   💰 Цена: ${item.price} ₽ × ${item.quantity} = ${itemTotal} ₽\n\n`;
    });
    
    const total = shoppingCart.getTotal();
    orderText += `💰 Итого: ${total} ₽\n\n`;
    orderText += "---\n";
    orderText += "📞 Ожидаю информацию о доставке и оплате.";
    
    const telegramLink = "https://t.me/NewshopNm";
    const encodedText = encodeURIComponent(orderText);
    const fullLink = `${telegramLink}?text=${encodedText}`;
    
    window.open(fullLink, '_blank');
    clearCart();
    toggleCart();
}

// УВЕДОМЛЕНИЯ
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? '#4CAF50' : type === 'error' ? '#f44336' : '#2196f3'};
        color: white;
        padding: 15px 25px;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        z-index: 10001;
        animation: slideInRight 0.3s ease;
        max-width: 350px;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 12px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.1);
    `;
    
    notification.innerHTML = `
        <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
        <span>${message}</span>
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.animation = 'slideOutRight 0.3s ease';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
    
    // Закрытие по клику
    notification.onclick = () => {
        notification.style.animation = 'slideOutRight 0.3s ease';
        setTimeout(() => notification.remove(), 300);
    };
}

// МОБИЛЬНОЕ МЕНЮ
class MobileMenu {
    constructor() {
        this.menuToggle = document.querySelector('.menu-toggle');
        this.navMenu = document.querySelector('.nav-menu');
        this.init();
    }
    
    init() {
        if (!this.menuToggle || !this.navMenu) return;
        
        this.setupEventListeners();
        this.setupAccessibility();
    }
    
    setupEventListeners() {
        this.menuToggle.addEventListener('click', () => this.toggleMenu());
        
        this.navMenu.addEventListener('click', (e) => {
            if (e.target.tagName === 'A') {
                this.closeMenu();
            }
        });
        
        document.addEventListener('click', this.handleOutsideClick.bind(this));
        document.addEventListener('keydown', this.handleEscapeKey.bind(this));
        
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768 && this.navMenu.classList.contains('active')) {
                this.closeMenu();
            }
        });
    }
    
    setupAccessibility() {
        this.menuToggle.setAttribute('aria-label', 'Открыть меню');
        this.menuToggle.setAttribute('aria-expanded', 'false');
        this.menuToggle.setAttribute('aria-controls', 'nav-menu');
        this.navMenu.setAttribute('id', 'nav-menu');
    }
    
    toggleMenu() {
        if (this.navMenu.classList.contains('active')) {
            this.closeMenu();
        } else {
            this.openMenu();
        }
    }
    
    openMenu() {
        this.navMenu.classList.add('active');
        this.menuToggle.setAttribute('aria-expanded', 'true');
        this.menuToggle.querySelector('i').className = 'fas fa-times';
        document.body.style.overflow = 'hidden';
        
        const firstLink = this.navMenu.querySelector('a');
        if (firstLink) firstLink.focus();
    }
    
    closeMenu() {
        this.navMenu.classList.remove('active');
        this.menuToggle.setAttribute('aria-expanded', 'false');
        this.menuToggle.querySelector('i').className = 'fas fa-bars';
        document.body.style.overflow = '';
        this.menuToggle.focus();
    }
    
    handleOutsideClick(e) {
        if (this.navMenu.classList.contains('active') && 
            !this.navMenu.contains(e.target) && 
            !this.menuToggle.contains(e.target)) {
            this.closeMenu();
        }
    }
    
    handleEscapeKey(e) {
        if (e.key === 'Escape' && this.navMenu.classList.contains('active')) {
            this.closeMenu();
        }
    }
}

// ГЛАВНАЯ ИНИЦИАЛИЗАЦИЯ
document.addEventListener('DOMContentLoaded', function() {
    console.log('🚀 Магазин игрушек загружается...');
    
    // Загружаем изображения товаров
    loadProductImages();
    
    // Инициализация корзины
    updateCart();
    updateCartDisplay();
    
    // Инициализация меню
    new MobileMenu();
    
    // Настройка корзины
    const cartIcon = document.getElementById('cart-icon');
    if (cartIcon) {
        cartIcon.addEventListener('click', toggleCart);
    }
    
    // Плавная прокрутка для ссылок
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            if (targetId === '#') return;
            
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                targetElement.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
    
    // Закрытие корзины при клике на темный фон
    document.getElementById('cartSidebar').addEventListener('click', function(e) {
        if (e.target === this) {
            toggleCart();
        }
    });
    
    console.log('✅ Магазин готов к работе!');
});

// Глобальные функции
window.updateCartQuantity = updateCartQuantity;
window.removeFromCart = removeFromCart;
window.checkout = checkout;
window.clearCart = clearCart;
window.openAvitoModal = openAvitoModal;
window.closeAvitoModal = closeAvitoModal;
window.changeAvitoPhoto = changeAvitoPhoto;
window.toggleZoom = toggleZoom;
window.addToCart = addToCart;
window.toggleCart = toggleCart;
</script>
    
    <script src="newyear.js"></script>


document.addEventListener('DOMContentLoaded', function() {
    const menuToggle = document.querySelector('.menu-toggle');
    const navMenu = document.querySelector('.nav-menu');
    
    if (menuToggle) {
        menuToggle.addEventListener('click', function() {
            navMenu.classList.toggle('active');
        });
    }
    
    // Закрытие меню при клике на ссылку
    const navLinks = document.querySelectorAll('.nav-menu a');
    navLinks.forEach(link => {
        link.addEventListener('click', function() {
            navMenu.classList.remove('active');
        });
    });
});
</script>
</body>
</html>  
